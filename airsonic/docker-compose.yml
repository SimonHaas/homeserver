version: "3.6"
services:
    airsonic:
        image: linuxserver/airsonic
        container_name: airsonic
        networks:
            - traefik_proxy
        environment:
            - JAVA_OPTS=-Dserver.use-forward-headers=true
            - PUID=1000
            - PGID=1000
            - TZ=Europe/London
        volumes:
            - ../airsonic/data/config:/config
            - ../airsonic/data/music:/music
            - ../airsonic/data/playlists:/playlists
            - ../airsonic/data/podcasts:/podcasts
            - ../airsonic/data/media:/media #optional
            - ../airsonic/data/audiobooks:/audiobooks
        restart: unless-stopped
        labels:
            - "traefik.backend=airsonic"
            - "traefik.frontend.rule=Host:airsonic.simon-haas.eu"
            - "traefik.enable=true"
            - "traefik.port=4040"

networks:
    traefik_proxy:
        external:
            name: traefik_proxy
    default:
        driver: bridge